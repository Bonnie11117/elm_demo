<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="framework/font-awesome/css/font-awesome.min.css" rel="stylesheet" />
  <link href="framework/reset.css" rel="stylesheet" />
  <link href="css/businessInfo.css" rel="stylesheet" />
  <title>饿了么 商家信息</title>
  <style>
    .fa-minus-circle.disabled {
      opacity: 0.3;
      cursor: not-allowed;
    }
  </style>
</head>
<body>
  <div class="wrapper">

    <header>
      <p>商家信息</p>
    </header>

    <div class="business-logo">
      <img src="img/sj01.png" alt="商家LOGO">
    </div>

    <div class="business-info">
      <h1>万家饺子（软件园E18店）</h1>
      <p>&#165;15起送 &#165;3配送</p>
      <p>各种饺子炒菜</p>
    </div>

    <ul class="food">
      <li data-price="15">
        <div class="food-left">
          <img src="img/sp01.png" alt="">
          <div class="food-left-info">
            <h3>纯肉鲜肉（水饺）</h3>
            <p>新鲜猪肉</p>
            <p>&#165;15</p>
          </div>
        </div>
        <div class="food-right">
          <div><i class="fa fa-minus-circle disabled"></i></div>
          <p><span>0</span></p>
          <div><i class="fa fa-plus-circle"></i></div>
        </div>
      </li>
      <li data-price="16">
        <div class="food-left">
          <img src="img/sp02.png" alt="">
          <div class="food-left-info">
            <h3>玉米鲜肉（水饺）</h3>
            <p>玉米鲜肉</p>
            <p>&#165;16</p>
          </div>
        </div>
        <div class="food-right">
          <div><i class="fa fa-minus-circle disabled"></i></div>
          <p><span>0</span></p>
          <div><i class="fa fa-plus-circle"></i></div>
        </div>
      </li>
      <li data-price="22">
        <div class="food-left">
          <img src="img/sp03.png" alt="">
          <div class="food-left-info">
            <h3>虾仁三鲜（蒸饺）</h3>
            <p>虾仁三鲜</p>
            <p>&#165;22</p>
          </div>
        </div>
        <div class="food-right">
          <div><i class="fa fa-minus-circle disabled"></i></div>
          <p><span>0</span></p>
          <div><i class="fa fa-plus-circle"></i></div>
        </div>
      </li>
      <li data-price="15">
        <div class="food-left">
          <img src="img/sp04.png" alt="">
          <div class="food-left-info">
            <h3>素三鲜（蒸饺）</h3>
            <p>素三鲜</p>
            <p>&#165;15</p>
          </div>
        </div>
        <div class="food-right">
          <div><i class="fa fa-minus-circle disabled"></i></div>
          <p><span>0</span></p>
          <div><i class="fa fa-plus-circle"></i></div>
        </div>
      </li>
      <li data-price="16">
        <div class="food-left">
          <img src="img/sp05.png" alt="">
          <div class="food-left-info">
            <h3>角瓜鸡蛋（蒸饺）</h3>
            <p>角瓜鸡蛋</p>
            <p>&#165;16</p>
          </div>
        </div>
        <div class="food-right">
          <div><i class="fa fa-minus-circle disabled"></i></div>
          <p><span>0</span></p>
          <div><i class="fa fa-plus-circle"></i></div>
        </div>
      </li>
      <li data-price="18">
        <div class="food-left">
          <img src="img/sp06.png" alt="">
          <div class="food-left-info">
            <h3>小白菜肉（水饺）</h3>
            <p>小白菜肉</p>
            <p>&#165;18</p>
          </div>
        </div>
        <div class="food-right">
          <div><i class="fa fa-minus-circle disabled"></i></div>
          <p><span>0</span></p>
          <div><i class="fa fa-plus-circle"></i></div>
        </div>
      </li>
      <li data-price="18">
        <div class="food-left">
          <img src="img/sp07.png" alt="">
          <div class="food-left-info">
            <h3>芹菜牛肉（水饺）</h3>
            <p>芹菜牛肉</p>
            <p>&#165;18</p>
          </div>
        </div>
        <div class="food-right">
          <div><i class="fa fa-minus-circle disabled"></i></div>
          <p><span>0</span></p>
          <div><i class="fa fa-plus-circle"></i></div>
        </div>
      </li>
    </ul>
    
    <!-- 购物车部分 -->
    <div class="cart">
      <div class="cart-left">
        <div class="cart-left-icon">
          <i class="fa fa-shopping-cart"></i>
          <div class="cart-left-icon-quantity" id="cartCount">0</div>
        </div>
        <div class="cart-left-info">
          <p id="cartAmount">&#165;0.00</p>
          <p>另需配送费3元</p>
        </div>
      </div>
      <div class="cart-right">
        <div class="cart-right-item" onclick="location.href='order.html'">
          去结算
        </div>
      </div>
    </div>
    
  </div>  
  
  <script>
    const DELIVERY_FEE = 3;
    const cartCountEl = document.getElementById('cartCount');
    const cartAmountEl = document.getElementById('cartAmount');

    function updateCart() {
      let totalCount = 0;
      let totalPrice = 0;
      document.querySelectorAll('.food li').forEach(item => {
        const count = parseInt(item.querySelector('p span').textContent) || 0;
        const price = parseInt(item.getAttribute('data-price')) || 0;
        totalCount += count;
        totalPrice += count * price;
      });
      cartCountEl.textContent = totalCount;
      cartAmountEl.innerHTML = `&#165;${(totalPrice + DELIVERY_FEE).toFixed(2)}`;
    }

    document.querySelectorAll('.food li').forEach(item => {
      const minus = item.querySelector('.fa-minus-circle');
      const plus = item.querySelector('.fa-plus-circle');
      const countSpan = item.querySelector('p span');

      plus.addEventListener('click', () => {
        let count = parseInt(countSpan.textContent) || 0;
        count++;
        countSpan.textContent = count;
        minus.classList.remove('disabled');
        updateCart();
      });

      minus.addEventListener('click', () => {
        if (minus.classList.contains('disabled')) return;
        let count = parseInt(countSpan.textContent) || 0;
        if (count > 0) {
          count--;
          countSpan.textContent = count;
        }
        if (count === 0) {
          minus.classList.add('disabled');
        }
        updateCart();
      });

      if (parseInt(countSpan.textContent) === 0) {
        minus.classList.add('disabled');
      }
    });

    updateCart();
  </script>
</body>
</html>
